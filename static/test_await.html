<html>
<body>

<h1>Проверка создания паузы при выполнении JS на указанное число секунд синхронным запросом к серверу.</h1>

<div id = "log"></div>
<button id="start">start</button>
<script>

var log = document.getElementById('log');
var start = document.getElementById('start');

function getXmlHttp() {
	var xmlhttp;
	try {
		xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
	} catch (e) {
		try {
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		} catch (E) {
			xmlhttp = false;
		}
	}
	if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
		xmlhttp = new XMLHttpRequest();
	}
	return xmlhttp;
};

var delay = function (timeout) {
	var t = timeout * 1000;
    var xmlhttp = getXmlHttp();
    xmlhttp.open('GET', 'http://localhost:3000/delay/' + t, false);
    var stamp = Date.now();
    xmlhttp.send(null);
    log.innerHTML = log.innerHTML + 'response given at ' + (Date.now() - stamp);
    return t;
};

log.innerHTML = 'sending timeout [10000]<br>';
start.onclick = function() {
    var ttt = delay(10);
    alert(ttt);
};

</script>
